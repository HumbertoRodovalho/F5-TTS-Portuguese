defaults:
  - _self_

project: "braille_project_optimized"

train:
  seed: 42
  ddp_backend: "nccl"

optim:
  epochs: 50
  learning_rate: 1e-5
  weight_decay: 1e-2
  num_warmup_updates: 200
  optimizer: "adamw"
  scheduler: "cosine"
  max_grad_norm: 1.0
  grad_accumulation_steps: 8  
  bnb_optimizer: True         

ckpts:
  save_per_updates: 1000      # Adjust as needed
  last_per_updates: 500
  save_dir: "./ckpts"
  keep_last_n_checkpoints: 2
  log_interval: 10
  logger: "tensorboard"
  log_samples: False          # Disabled to avoid memory spikes on the T4

model:
  name: "F5-TTS"
  backbone: "DiT"
  tokenizer: "custom"
  tokenizer_path: "./data/vocab.txt" # Path generated by prepare_dataset.py
  
  arch:
    dim: 1024
    depth: 22
    heads: 16
    ff_mult: 2
    text_dim: 512
    conv_layers: 4
    dropout: 0.1

  mel_spec:
    mel_spec_type: "vocos"
    target_sample_rate: 24000
    n_mel_channels: 100
    hop_length: 256
    win_length: 1024
    n_fft: 1024

  vocoder:
    vocoder_name: "vocos"
    speaker_id: 0
    is_local: False
    local_path: null

datasets:
  name: "braille_arrow"       
  dataset_name: "braille_arrow" 
  train_dataset_path: "./data/braille_arrow"
  val_dataset_path: null
  mel_spec_type: "vocos"
  sampling_rate: 24000
  tokenizer: "custom"
  filter_length: 15.0       
  min_length: 0.5
  hop_length: 256
  win_length: 1024
  n_mel_channels: 100
  
  batch_size_per_gpu: 1     # CRITIC: Batch 1 to fit on 16GB
  batch_size_type: "sample"
  max_samples: 50000 
  num_workers: 1

#Note: Configuration optimized for NVIDIA T4 GPU with 16GB VRAM.